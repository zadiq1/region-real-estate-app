<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulting Blog | DreamSpace Real Estate</title>
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <style>
    /* Modal Styles */
    .modal {
      display: none; position: fixed; z-index: 10000;
      left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
    }
    .modal-content {
      background: white; margin: 10% auto;
      padding: 2rem; width: 90%; max-width: 600px;
      border-radius: 8px; position: relative;
    }
    .modal-close {
      position: absolute; top: 10px; right: 15px;
      font-size: 1.5rem; cursor: pointer;
    }
  </style>
</head>
<body>
  <header><!-- your nav header here --></header>

  <main class="container">
    <h2 style="margin: 2rem 0;">Consulting Articles</h2>

    <select id="categoryFilter">
      <option value="all">All Categories</option>
      <option value="Tips">Tips</option>
      <option value="Construction">Construction</option>
      <option value="Legal">Legal</option>
    </select>

    <div class="listings-container" id="blog-list"></div>
  </main>

  <footer><!-- your footer --></footer>

  <!-- Modal for Full Article -->
  <div id="blog-modal" class="modal">
    <div class="modal-content">
      <span id="modal-close" class="modal-close">&times;</span>
      <h3 id="modal-title"></h3>
      <p id="modal-body"></p>
    </div>
  </div>

  <!-- Firebase & Main Logic -->
  <script>
 const firebaseConfig = {
  apiKey: "AIzaSyAAoPIw61ZsZB8C7zH4183yWUqh44uwbgA",
  authDomain: "dreamspace-8f29c.firebaseapp.com",
  projectId: "dreamspace-8f29c",
  storageBucket: "dreamspace-8f29c.firebasestorage.app",
  messagingSenderId: "828857686522",
  appId: "1:828857686522:web:35af98d58532393029ac43",
  measurementId: "G-VQE70BBCFM"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const blogList = document.getElementById("blog-list");
    const categoryFilter = document.getElementById("categoryFilter");
    const modal = document.getElementById("blog-modal");
    const modalTitle = document.getElementById("modal-title");
    const modalBody = document.getElementById("modal-body");
    const modalClose = document.getElementById("modal-close");

    let articles = [];

    function renderArticles(filter) {
      blogList.innerHTML = "";
      const filtered = articles.filter(a => filter === "all" || a.category === filter);
      if (filtered.length === 0) {
        blogList.innerHTML = "<p>No articles found.</p>";
        return;
      }
      filtered.forEach(a => {
        const div = document.createElement("div");
        div.className = "property-card";
        div.innerHTML = `
          <img src="${a.image}" alt="${a.title}" />
          <div class="property-card-content">
            <h3>${a.title}</h3>
            <p>${a.intro}</p>
            <a href="#" class="read-more" data-id="${a.id}">Read More</a>
          </div>
        `;
        blogList.appendChild(div);
      });
      document.querySelectorAll(".read-more").forEach(btn => {
        btn.addEventListener("click", e => {
          e.preventDefault();
          const art = articles.find(x => x.id === btn.dataset.id);
          modalTitle.textContent = art.title;
          modalBody.textContent = art.content;
          modal.style.display = "block";
        });
      });
    }

    db.collection("blogs").get().then(sn => {
      articles = sn.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      renderArticles("all");
    });

    categoryFilter.addEventListener("change", () => renderArticles(categoryFilter.value));

    modalClose.addEventListener("click", () => modal.style.display = "none");
    window.addEventListener("click", e => { if (e.target === modal) modal.style.display = "none"; });
  </script>
</body>
</html>
